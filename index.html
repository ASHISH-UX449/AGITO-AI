<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Auth with Google Sign-In</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 450px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        .header {
            background: #4a5568;
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 24px;
            font-weight: 600;
        }
        
        .form-container {
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2d3748;
        }
        
        .form-group input {
            width: 100%;
            padding: 14px;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }
        
        .btn {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
            margin-top: 10px;
        }
        
        .btn-secondary:hover {
            background: #cbd5e0;
        }
        
        .btn-google {
            background: #fff;
            color: #757575;
            border: 1px solid #ddd;
        }
        
        .btn-google:hover {
            background: #f5f5f5;
            transform: translateY(-2px);
        }
        
        .form-footer {
            text-align: center;
            margin-top: 20px;
            color: #718096;
        }
        
        .form-footer a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
        }
        
        .form-footer a:hover {
            text-decoration: underline;
        }
        
        .message {
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            text-align: center;
            display: none;
        }
        
        .success {
            background: #c6f6d5;
            color: #2d7044;
            border: 1px solid #9ae6b4;
        }
        
        .error {
            background: #fed7d7;
            color: #c53030;
            border: 1px solid #feb2b2;
        }
        
        .user-info {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .user-info h2 {
            margin-bottom: 15px;
            color: #2d3748;
        }
        
        .verified-badge {
            display: inline-block;
            background: #48bb78;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 8px;
        }
        
        .not-verified {
            display: inline-block;
            background: #e53e3e;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 8px;
        }
        
        .resend-link {
            color: #667eea;
            cursor: pointer;
            text-decoration: underline;
            margin-top: 10px;
            display: inline-block;
        }
        
        .divider {
            display: flex;
            align-items: center;
            margin: 20px 0;
        }
        
        .divider::before,
        .divider::after {
            content: "";
            flex: 1;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .divider span {
            padding: 0 10px;
            color: #718096;
            font-size: 14px;
        }
        
        .user-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 15px;
            object-fit: cover;
            border: 3px solid #667eea;
        }
        
        /* Navigation styles */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            justify-content: center;
            gap: 20px;
        }
        
        nav a {
            color: #4a5568;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 4px;
            transition: background 0.3s;
        }
        
        nav a:hover {
            background: #edf2f7;
        }
        
        .page-content {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-width: 800px;
            margin: 80px auto 40px;
        }
        
        .page-content h2 {
            color: #2d3748;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .page-content p {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        /* App container for routing */
        #app-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
    </style>
</head>
<body>
    <nav>
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
            <li><a href="#login">Login</a></li>
            <li><a href="#signup">Sign Up</a></li>
        </ul>
    </nav>
    
    <div id="app-container">
        <!-- Content will be dynamically loaded here -->
    </div>

    <!-- Firebase Auth Templates (initially hidden) -->
    <div id="auth-templates" style="display: none;">
        <!-- Login Form -->
        <div id="login-form">
            <div class="container">
                <div class="header">
                    <h1>Login to Your Account</h1>
                </div>
                
                <div class="form-container">
                    <div id="message" class="message"></div>
                    
                    <div class="form-group">
                        <label for="login-email">Email</label>
                        <input type="email" id="login-email" placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" placeholder="Enter your password">
                    </div>
                    <button class="btn btn-primary" onclick="login()">Login</button>
                    <button class="btn btn-secondary" onclick="showPage('signup')">Create New Account</button>
                    
                    <div class="divider"><span>Or continue with</span></div>
                    
                    <button class="btn btn-google" onclick="signInWithGoogle()">
                        <svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 488 512">
                            <path fill="#4285F4" d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"/>
                        </svg>
                        Sign in with Google
                    </button>
                    
                    <div class="form-footer">
                        <a href="#" onclick="resetPassword()">Forgot your password?</a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Signup Form -->
        <div id="signup-form">
            <div class="container">
                <div class="header">
                    <h1>Create a New Account</h1>
                </div>
                
                <div class="form-container">
                    <div id="signup-message" class="message"></div>
                    
                    <div class="form-group">
                        <label for="signup-email">Email</label>
                        <input type="email" id="signup-email" placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label for="signup-password">Password</label>
                        <input type="password" id="signup-password" placeholder="Create a password">
                    </div>
                    <div class="form-group">
                        <label for="confirm-password">Confirm Password</label>
                        <input type="password" id="confirm-password" placeholder="Confirm your password">
                    </div>
                    <button class="btn btn-primary" onclick="signup()">Create Account</button>
                    <button class="btn btn-secondary" onclick="showPage('login')">Back to Login</button>
                    
                    <div class="divider"><span>Or sign up with</span></div>
                    
                    <button class="btn btn-google" onclick="signInWithGoogle()">
                        <svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 488 512">
                            <path fill="#4285F4" d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"/>
                        </svg>
                        Sign up with Google
                    </button>
                </div>
            </div>
        </div>
        
        <!-- User Info -->
        <div id="user-info">
            <div class="container">
                <div class="header">
                    <h1>Your Profile</h1>
                </div>
                
                <div class="form-container">
                    <div id="profile-message" class="message"></div>
                    
                    <div class="user-info" style="display: block;">
                        <img id="user-avatar" class="user-avatar" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23667eea'%3E%3Cpath d='M12 12a5 5 0 1 0 0-10 5 5 0 0 0 0 10zm0 2c-6.627 0-12 5.373-12 12h24c0-6.627-5.373-12-12-12z'/%3E%3C/svg%3E" alt="User">
                        <h2>Welcome, <span id="user-name"></span></h2>
                        <p>Email: <span id="user-email"></span></p>
                        <p>Status: 
                            <span id="email-verified">
                                <span class="verified-badge" id="verified-badge">Verified</span>
                                <span class="not-verified" id="not-verified" style="display: none;">Not Verified</span>
                            </span>
                        </p>
                        <p class="resend-link" id="resend-verification" onclick="sendVerificationEmail()">Resend Verification Email</p>
                        <button class="btn btn-secondary" onclick="logout()" style="margin-top: 20px;">Logout</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Page Templates -->
        <div id="home-page">
            <div class="page-content">
                <h2>Welcome to Our App</h2>
                <p>This is a demonstration of Firebase Authentication with Google Sign-In. You can create an account, sign in with email/password or using your Google account, and manage your profile.</p>
                <p>To get started, please <a href="#login" style="color: #667eea; text-decoration: none; font-weight: 500;">login</a> or <a href="#signup" style="color: #667eea; text-decoration: none; font-weight: 500;">create a new account</a>.</p>
            </div>
        </div>
        
        <div id="about-page">
            <div class="page-content">
                <h2>About Us</h2>
                <p>This application demonstrates how to implement Firebase authentication with Google sign-in functionality.</p>
                <p>Firebase provides a complete authentication solution that supports email/password authentication, Google sign-in, and many other identity providers.</p>
                <p>All user data is securely stored and managed by Firebase's robust infrastructure.</p>
            </div>
        </div>
        
        <div id="contact-page">
            <div class="page-content">
                <h2>Contact Us</h2>
                <p>If you have any questions about this application or need support with Firebase authentication, feel free to reach out.</p>
                <p>You can contact us at: support@example.com</p>
                <p>We'd be happy to help you with your authentication implementation needs!</p>
            </div>
        </div>
        
        <div id="error-page">
            <div class="page-content">
                <h2>Page Not Found</h2>
                <p>The page you're looking for doesn't exist.</p>
                <p>Please check the URL or navigate using the menu above.</p>
            </div>
        </div>
    </div>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCckXmWNrTXUvvTvK2eEfRXWwzsbz7fmDI",
            authDomain: "tic-tak-toe-73db7.firebaseapp.com",
            databaseURL: "https://tic-tak-toe-73db7-default-rtdb.firebaseio.com",
            projectId: "tic-tak-toe-73db7",
            storageBucket: "tic-tak-toe-73db7.firebasestorage.app",
            messagingSenderId: "151569480139",
            appId: "1:151569480139:web:4f03e4abdcff9ef1685e4e"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Show message function
        function showMessage(message, type, messageElementId = 'message') {
            const messageEl = document.getElementById(messageElementId);
            messageEl.textContent = message;
            messageEl.className = 'message ' + type;
            messageEl.style.display = 'block';
            
            // Hide message after 5 seconds
            setTimeout(() => {
                messageEl.style.display = 'none';
            }, 5000);
        }

        // Show a specific page based on hash routing
        function showPage(page) {
            const appContainer = document.getElementById('app-container');
            const template = document.getElementById(page + '-form') || 
                             document.getElementById(page + '-page') || 
                             document.getElementById('error-page');
            
            if (template) {
                appContainer.innerHTML = template.innerHTML;
                
                // If showing auth pages, update the navigation based on auth state
                if (page === 'login' || page === 'signup') {
                    auth.onAuthStateChanged((user) => {
                        if (user) {
                            showUserInfo(user);
                        }
                    });
                }
            } else {
                appContainer.innerHTML = document.getElementById('error-page').innerHTML;
            }
            
            // Update URL hash
            window.location.hash = page;
        }

        // Show user info
        function showUserInfo(user) {
            const appContainer = document.getElementById('app-container');
            appContainer.innerHTML = document.getElementById('user-info').innerHTML;
            
            document.getElementById('user-name').textContent = user.displayName || user.email;
            document.getElementById('user-email').textContent = user.email;
            
            // Set user avatar if available
            if (user.photoURL) {
                document.getElementById('user-avatar').src = user.photoURL;
            }
            
            if (user.emailVerified) {
                document.getElementById('verified-badge').style.display = 'inline-block';
                document.getElementById('not-verified').style.display = 'none';
                document.getElementById('resend-verification').style.display = 'none';
            } else {
                document.getElementById('verified-badge').style.display = 'none';
                document.getElementById('not-verified').style.display = 'inline-block';
                document.getElementById('resend-verification').style.display = 'block';
            }
            
            // Update URL hash
            window.location.hash = 'profile';
        }

        // Signup function
        function signup() {
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            
            if (password !== confirmPassword) {
                showMessage("Passwords don't match", "error", "signup-message");
                return;
            }
            
            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // Send email verification
                    sendVerificationEmail();
                    
                    // Save user to Firestore (optional)
                    db.collection("users").doc(userCredential.user.uid).set({
                        email: email,
                        createdAt: new Date()
                    })
                    .then(() => {
                        showMessage("Account created successfully! Verification email sent.", "success", "signup-message");
                    })
                    .catch((error) => {
                        console.error("Error saving user: ", error);
                    });
                })
                .catch((error) => {
                    showMessage(error.message, "error", "signup-message");
                });
        }

        // Send verification email
        function sendVerificationEmail() {
            const user = auth.currentUser;
            
            user.sendEmailVerification()
                .then(() => {
                    showMessage("Verification email sent. Please check your inbox.", "success", "profile-message");
                })
                .catch((error) => {
                    showMessage(error.message, "error", "profile-message");
                });
        }

        // Login function
        function login() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    showUserInfo(userCredential.user);
                    showMessage("Login successful!", "success");
                })
                .catch((error) => {
                    showMessage(error.message, "error");
                });
        }

        // Sign in with Google
        function signInWithGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            
            auth.signInWithPopup(provider)
                .then((result) => {
                    // This gives you a Google Access Token
                    const credential = result.credential;
                    const token = credential.accessToken;
                    
                    // The signed-in user info
                    const user = result.user;
                    
                    showUserInfo(user);
                    showMessage("Google sign-in successful!", "success", "profile-message");
                    
                    // Save user to Firestore (optional)
                    db.collection("users").doc(user.uid).set({
                        email: user.email,
                        name: user.displayName,
                        photoURL: user.photoURL,
                        createdAt: new Date()
                    })
                    .catch((error) => {
                        console.error("Error saving user: ", error);
                    });
                })
                .catch((error) => {
                    showMessage(error.message, "error");
                });
        }

        // Logout function
        function logout() {
            auth.signOut()
                .then(() => {
                    showPage('home');
                    showMessage("You have been logged out", "success");
                })
                .catch((error) => {
                    showMessage(error.message, "error");
                });
        }

        // Reset password
        function resetPassword() {
            const email = document.getElementById('login-email').value;
            
            if (!email) {
                showMessage("Please enter your email address first", "error");
                return;
            }
            
            auth.sendPasswordResetEmail(email)
                .then(() => {
                    showMessage("Password reset email sent. Please check your inbox.", "success");
                })
                .catch((error) => {
                    showMessage(error.message, "error");
                });
        }

        // Handle hash change for routing
        window.onhashchange = function() {
            const page = window.location.hash.substring(1) || 'home';
            showPage(page);
        };

        // Auth state listener
        auth.onAuthStateChanged((user) => {
            if (user) {
                // If user is logged in, show profile when accessing auth pages
                if (window.location.hash === '#login' || window.location.hash === '#signup') {
                    showUserInfo(user);
                }
            } else {
                // If user is not logged in, redirect to home when accessing profile
                if (window.location.hash === '#profile') {
                    showPage('home');
                }
            }
        });

        // Initialize the app
        window.onload = function() {
            const page = window.location.hash.substring(1) || 'home';
            showPage(page);
        };
    </script>
</body>
</html>